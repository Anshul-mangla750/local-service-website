<% layout('/layouts/boilerplate.ejs') -%>
<div class="container my-4">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card">
        <% if (service.image && service.image.url) { %>
          <img src="<%= service.image.url %>" class="card-img-top" alt="service image">
        <% } %>
        <div class="card-body">
          <p class="text-muted">Owned by: <%= (service.owner && service.owner.username) ? service.owner.username : 'Unknown' %></p>
          <h5 class="card-title"><%= service.title %></h5>
          <p class="card-text"><%= service.description %></p>
        </div>
        <ul class="list-group list-group-flush">
          <li class="list-group-item">Starting from: â‚¹<%= service.price %></li>
          <li class="list-group-item">Location: <%= service.location %></li>
          <li class="list-group-item">Category: <%= service.category %></li>
        </ul>
        <div class="card-body">
          <% if (currUser && currUser._id.equals(service.owner._id)) { %>
            <div class="d-flex justify-content-between">
              <a href="/services/<%= service._id %>/edit" class="btn btn-primary">Edit</a>
              <form action="/services/<%= service._id %>?_method=DELETE" method="POST" class="d-inline">
                <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this service?')">Delete</button>
              </form>
            </div>
          <% }  else if (currUser) { %>
            <a href="/services/<%= service._id %>/book" class="btn btn-success">Book Now</a>
          <% } %>
        </div>
      </div>
    </div>
  </div>
</div>
 